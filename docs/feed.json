{
  "version": "https://jsonfeed.org/version/1.1",
  "title": "Dan Gibbs Feed",
  "language": "en-GB",
  "home_page_url": "https://dangibbs.uk",
  "feed_url": "https://dangibbs.uk/feed.json",
  "description": "Posts and articles from dangibbs.uk",
  "author": {
    "name": "Dan Gibbs",
    "url": "https://dangibbs.uk"
  },
  "items": [{
      "id": "https://dangibbs.uk/blog/using-oauth-roles-in-grafana-with-keycloak/",
      "url": "https://dangibbs.uk/blog/using-oauth-roles-in-grafana-with-keycloak/",
      "title": "Setting Grafana Roles with Keycloak over OAuth",
      "content_html": "<p>When signing in to Grafana via OAuth the dashboard will default to the &quot;Viewer&quot;\nrole if a specific role can not be matched. Roles need to be supplied to the\nOAuth UserInfo endpoint to support logging in as an Admin or Editor.</p>\n<p>See the <a href=\"https://grafana.com/docs/grafana/latest/auth/generic-oauth/\">Generic OAuth authentication</a>\ndocumentation for useful information.</p>\n<h2 id=\"goto-matching-keycloak-roles-with-grafana\" tabindex=\"-1\">Matching Keycloak Roles with Grafana</h2>\n<p>Set the <code>role_attribute_path</code> property to match <code>roles.admin</code> and <code>roles.editor</code>.\nIf the OAuth response contains neither role the attribute will fallback to the\nviewer role (matching the default Grafana behaviour):</p>\n<pre class=\"language-ini\" tabindex=\"0\"><code class=\"language-ini\"><span class=\"token comment\"># /etc/grafana/grafana.ini</span><br><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">auth.generic_oauth</span><span class=\"token punctuation\">]</span></span><br><span class=\"token key attr-name\">role_attribute_path</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">contains(roles[*], 'admin') &amp;&amp; 'Admin' || contains(roles[*], 'editor') &amp;&amp; 'Editor' || 'Viewer'</span></code></pre>\n<h2 id=\"goto-setup-the-keycloak-roles\" tabindex=\"-1\">Setup the Keycloak Roles</h2>\n<p>In the Keycloak admin area create 2 new roles under <mark>Configure &gt; Roles</mark>\nnamed <code>admin</code> and <code>editor</code>.</p>\n<p>Under <mark>Configure &gt; Clients</mark> select the client and go to the <mark>Mappers</mark> tab.\nCreate a new protocol mapper with the following settings:</p>\n<ul>\n<li><strong>Name</strong>: roles</li>\n<li><strong>Mapper Type</strong>: User Realm Role</li>\n<li><strong>Multivalued</strong>: on</li>\n<li><strong>Token Claim Name</strong>: roles</li>\n<li><strong>Claim JSON Type</strong>: String</li>\n<li><strong>Add to ID token</strong>: on</li>\n<li><strong>Add to access token</strong>: on</li>\n<li><strong>Add to userinfo</strong>: on</li>\n</ul>\n<p><picture><source type=\"image/avif\" sizes=\"749px\" srcset=\"https://dangibbs.uk/assets/images/scaled/keycloak-create-protocol-mapper-4f5e1cc09df75feb41e06922cac7b77e.avif 749w\"><source type=\"image/webp\" sizes=\"749px\" srcset=\"https://dangibbs.uk/assets/images/scaled/keycloak-create-protocol-mapper-4f5e1cc09df75feb41e06922cac7b77e.webp 749w\"><source type=\"image/jpeg\" sizes=\"749px\" srcset=\"https://dangibbs.uk/assets/images/scaled/keycloak-create-protocol-mapper-4f5e1cc09df75feb41e06922cac7b77e.jpeg 749w\"><img width=\"749\" height=\"553\" alt=\"Keycloak Create Grafana Role Protocol Mapper\" class=\"fallback--img\" decoding=\"async\" src=\"https://dangibbs.uk/assets/images/scaled/keycloak-create-protocol-mapper-4f5e1cc09df75feb41e06922cac7b77e.jpeg\"></picture></p>\n<p>After creating this mapper the roles data should now be added to the UserInfo\nendpoint.</p>\n<p>Finally, under <mark>Manage &gt; Users</mark>, select a user, go to the <mark>Role Mappings</mark>\ntab and assign one of the newly added roles. Sign in to Grafana with the\nselected user and they should now have the relevant role assigned.</p>\n<h2 id=\"goto-testing-the-userinfo-endpoint-in-keycloak\" tabindex=\"-1\">Testing the UserInfo Endpoint in Keycloak</h2>\n<p>The Keycloak admin area provides an interface for evaluating the users data\nreturned on from the <code>UserInfo</code> endpoint. This can be used to check that roles\nare being sent to Grafana as intended.</p>\n<p>Under <mark>Configure &gt; Clients</mark>:</p>\n<ul>\n<li>Select the client and go to the <mark>Client Scopes</mark> tab</li>\n<li>Select the nested <mark>Evaluate</mark> tab</li>\n<li>Go to the <mark>Select a user...</mark> dropdown, enter a user and click <mark>Evaluate</mark></li>\n<li>Select the <mark>Generated User Info</mark> tab</li>\n</ul>\n<p><picture><source type=\"image/avif\" sizes=\"1375px\" srcset=\"https://dangibbs.uk/assets/images/scaled/keycloak-generate-user-info-ecbdb7763a10ab661fe082ebfb721ac7.avif 1375w\"><source type=\"image/webp\" sizes=\"1375px\" srcset=\"https://dangibbs.uk/assets/images/scaled/keycloak-generate-user-info-ecbdb7763a10ab661fe082ebfb721ac7.webp 1375w\"><source type=\"image/jpeg\" sizes=\"1375px\" srcset=\"https://dangibbs.uk/assets/images/scaled/keycloak-generate-user-info-ecbdb7763a10ab661fe082ebfb721ac7.jpeg 1375w\"><img width=\"1375\" height=\"852\" alt=\"Keycloak View Generated UserInfo Endpoint\" class=\"fallback--img\" decoding=\"async\" src=\"https://dangibbs.uk/assets/images/scaled/keycloak-generate-user-info-ecbdb7763a10ab661fe082ebfb721ac7.jpeg\"></picture></p>\n<p>Setting the Grafana log level to <code>debug</code> can also be used to log information\nreturned from OAuth requests.</p>\n<pre class=\"language-ini\" tabindex=\"0\"><code class=\"language-ini\"><span class=\"token comment\"># /etc/grafana/grafana.ini</span><br><span class=\"token header\"><span class=\"token punctuation\">[</span><span class=\"token section-name selector\">log.file</span><span class=\"token punctuation\">]</span></span><br><span class=\"token key attr-name\">level</span> <span class=\"token punctuation\">=</span> <span class=\"token value attr-value\">debug</span></code></pre>\n",
      "date_published": "2022-01-21T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/running-systemd-docker-containers-archlinux/",
      "url": "https://dangibbs.uk/blog/running-systemd-docker-containers-archlinux/",
      "title": "How to run systemd Docker containers in Arch Linux",
      "content_html": "<p>Docker engine <a href=\"https://docs.docker.com/engine/release-notes/#20106\">20.10.6</a>\nrecently moved its cgroup v2 support out of experimental but it does not\nsupport <em>hybrid</em> hierarchies. Most modern systemd packages for Linux\ndistributions are compiled and shipped with the hybrid hierarchy which is a\nsystemd recommended default.</p>\n<p>You can view your host systemd environment with:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\">systemctl show -all <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> default-hierarchy</code></pre>\n<p>If the default hierarchy is listed as hybrid <code>default-hierarchy=hybrid</code> there\nwill likely be issues (regardless of read/write permissions) when running\nsystemd as an init system inside a Docker container.</p>\n<h2 id=\"goto-example\" tabindex=\"-1\">Example</h2>\n<p>Running the following <code>litmusimage/ubuntu</code> container fails to start.</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run -it --privileged --volume /sys/fs/cgroup:/sys/fs/cgroup:ro --tmpfs /tmp:exec litmusimage/ubuntu:20.04</code></pre>\n<p>Example init errors returned:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\">Failed to create /init.scope control group: Read-only <span class=\"token function\">file</span> system<br>Failed to allocate manager object: Read-only <span class=\"token function\">file</span> system<br><span class=\"token punctuation\">[</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token operator\">!</span><span class=\"token punctuation\">]</span> Failed to allocate manager object.<br>Exiting PID <span class=\"token number\">1</span><span class=\"token punctuation\">..</span>.</code></pre>\n<h2 id=\"goto-workaround\" tabindex=\"-1\">Workaround</h2>\n<p>Disable the hybrid hierarchy by setting the kernel parameter\n<code>systemd.unified_cgroup_hierarchy=0</code> from your boot loader or during kernel\ncompilation.</p>\n<h2 id=\"goto-grub-example\" tabindex=\"-1\">GRUB Example</h2>\n<p>Kernel parameters can be set in GRUB 2 by appending the <code>GRUB_CMDLINE_LINUX</code>\nor <code>GRUB_CMDLINE_LINUX_DEFAULT</code> options.</p>\n<pre class=\"language-ini\" tabindex=\"0\"><code class=\"language-ini\"><span class=\"token comment\"># /etc/default/grub</span><br><span class=\"token key attr-name\">GRUB_CMDLINE_LINUX_DEFAULT</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">\"\"</span><br><span class=\"token key attr-name\">GRUB_CMDLINE_LINUX</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">\"<span class=\"token inner-value\">quiet systemd.unified_cgroup_hierarchy=0</span>\"</span></code></pre>\n<p>Regenerate the GRUB configuration with:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">grub-mkconfig</span> -o /boot/grub/grub.cfg</code></pre>\n",
      "date_published": "2021-12-21T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/modx-manager-preview-logouts-and-varnish/",
      "url": "https://dangibbs.uk/blog/modx-manager-preview-logouts-and-varnish/",
      "title": "MODX Manager Preview Logouts and Varnish",
      "content_html": "<p>If you are using MODX in a server environment that runs Varnish you may\nexperience weird logging out issues, in particular when using the “preview”\nfeature from the manager.</p>\n<p>This is due to cookie conflicts resulting in MODX forcing a logout and can\neasily be resolved by adding a rule to prevent caching Manager requests under\n<code>vcl_recv</code> VCL.</p>\n<pre class=\"language-hcl\" tabindex=\"0\"><code class=\"language-hcl\">sub <span class=\"token keyword\">vcl_recv</span> <span class=\"token punctuation\">{</span><br><br>    <span class=\"token comment\"># MODX Manager</span><br>    if (req.url ~ <span class=\"token string\">\"^/manager/\"</span>) <span class=\"token punctuation\">{</span><br>        return(pass);<br>    <span class=\"token punctuation\">}</span><br><br><span class=\"token punctuation\">}</span></code></pre>\n",
      "date_published": "2012-02-11T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/finding-missing-fonts-in-gimp-xcf/",
      "url": "https://dangibbs.uk/blog/finding-missing-fonts-in-gimp-xcf/",
      "title": "Finding Missing Fonts in GIMP (XCF)",
      "content_html": "<p>Have you ever opened up an XCF in GIMP to find that the original font used\nwas missing? As far as I can tell GIMP doesn’t give any indication as to the\nfont name. The font name itself is stored inside the XCF file as plain text\nthough so you can open the XCF and find it.</p>\n<h2 id=\"goto-text-editor-%2F-hex-editor\" tabindex=\"-1\">Text Editor / Hex Editor</h2>\n<p>An easy, but not very elegant, method is to open up the file in a text\neditor (such as Kate or Notepad++) or a hex editor. From there you can shift\nthrough and do a search for 'font'.</p>\n<h2 id=\"goto-terminal\" tabindex=\"-1\">Terminal</h2>\n<p>There are plenty of ways to do this via a terminal but this is probably the\neasiest:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">grep</span> -aPo <span class=\"token string\">'font \"(.*?)\"'</span> thefile.xcf</code></pre>\n<p>To find fonts in multiple XCF files just add a wildcard:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">grep</span> -aPo <span class=\"token string\">'font \"(.*?)\"'</span> *.xcf</code></pre>\n<p>Of course you can get creative and recursively search inside a directory,\nreturn only unique matches etc:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">grep</span> -aPor -m <span class=\"token number\">1</span> <span class=\"token string\">'font \"(.*?)\"'</span> *.xcf</code></pre>\n<p>All three commands will output the actual font names and the file they are in.</p>\n<p>If anyone knows a more elegant method that can be done inside GIMP itself feel\nfree to share in the comments below (although personally the terminal method\nworks fine for me and likely much more flexible).</p>\n",
      "date_published": "2011-08-04T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/gnome-3-youtube-search-provider/",
      "url": "https://dangibbs.uk/blog/gnome-3-youtube-search-provider/",
      "title": "GNOME 3 Shell YouTube Search Provider",
      "content_html": "<p><a href=\"https://dangibbs.uk/apps/gnome/youtube.xml\">This XML file</a> adds a search button for YouTube in\nGNOME 3.</p>\n<p>To install you need to download the\n<a href=\"https://dangibbs.uk/apps/gnome/youtube.xml\">YouTube XML file</a>, move it to\n<code>/usr/share/gnome-shell/search_providers/</code> and restart the gnome shell.</p>\n<p>This can be done easily via the terminal with:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">wget</span> https://dangibbs.uk/apps/gnome/youtube.xml<br><span class=\"token function\">sudo</span> <span class=\"token function\">mv</span> youtube.xml /usr/share/gnome-shell/search_providers/</code></pre>\n<p>Finally you need to restart the gnome shell by using <mark>ALT+F2</mark> and entering\n<code>restart</code>.</p>\n<h2 id=\"goto-how-to-search-in-gnome-3\" tabindex=\"-1\">How to search in Gnome 3</h2>\n<p>If you aren’t familiar with how to search using Gnome 3 then here’s a\nbrief overview. First of all you need to enter the <mark>Activities Overview</mark> by\neither moving your mouse cursor to the top left of the screen, clicking\n<mark>Activities</mark> in the top left of the screen or by using the special key.</p>\n<p>Once you are in “Activites mode” you can start typing your search query\nstraight away. At the bottom of the screen are buttons of search providers\nyou can use which, by default, includes Google and Wikipedia. If the default\nsearch provider, which is highlighted, is what you want to use you can just\nhit enter instead of clicking a button.</p>\n",
      "date_published": "2011-04-22T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/advanced-functionality-of-eggtrayicon/",
      "url": "https://dangibbs.uk/blog/advanced-functionality-of-eggtrayicon/",
      "title": "PyGTK Tutorial – Advanced functionality of EggTrayIcon",
      "content_html": "<p>EggTrayIcon provides a StatusIcon style widget with advanced functionality.\nIt is displayed in the Notification Area / Taskbar of the desktop and can be\nused to position widgets such as Buttons.</p>\n<h2 id=\"goto-example\" tabindex=\"-1\">Example</h2>\n<pre class=\"language-python\" tabindex=\"0\"><code class=\"language-python\"><span class=\"token comment\">#! /usr/bin/python</span><br><br><span class=\"token keyword\">import</span> gtk<br><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">import</span> egg<span class=\"token punctuation\">.</span>trayicon<br><span class=\"token keyword\">except</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">print</span> <span class=\"token string\">\"You need to install the python-eggtrayicon package\"</span><br><br><span class=\"token keyword\">class</span> <span class=\"token class-name\">EggTrayIcon</span><span class=\"token punctuation\">:</span><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        self<span class=\"token punctuation\">.</span>tray <span class=\"token operator\">=</span> egg<span class=\"token punctuation\">.</span>trayicon<span class=\"token punctuation\">.</span>TrayIcon<span class=\"token punctuation\">(</span><span class=\"token string\">\"TrayIcon\"</span><span class=\"token punctuation\">)</span><br><br>        eventbox <span class=\"token operator\">=</span> gtk<span class=\"token punctuation\">.</span>EventBox<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>        image <span class=\"token operator\">=</span> gtk<span class=\"token punctuation\">.</span>Image<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>        image<span class=\"token punctuation\">.</span>set_from_stock<span class=\"token punctuation\">(</span>gtk<span class=\"token punctuation\">.</span>STOCK_HOME<span class=\"token punctuation\">,</span> gtk<span class=\"token punctuation\">.</span>ICON_SIZE_SMALL_TOOLBAR<span class=\"token punctuation\">)</span><br><br>        eventbox<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">\"button-press-event\"</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>icon_clicked<span class=\"token punctuation\">)</span><br><br>        eventbox<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">)</span><br>        self<span class=\"token punctuation\">.</span>tray<span class=\"token punctuation\">.</span>add<span class=\"token punctuation\">(</span>eventbox<span class=\"token punctuation\">)</span><br>        self<span class=\"token punctuation\">.</span>tray<span class=\"token punctuation\">.</span>show_all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">icon_clicked</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> widget<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        <span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span>button <span class=\"token operator\">==</span> <span class=\"token number\">3</span><span class=\"token punctuation\">:</span><br>            menu <span class=\"token operator\">=</span> gtk<span class=\"token punctuation\">.</span>Menu<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>            menuitem_about <span class=\"token operator\">=</span> gtk<span class=\"token punctuation\">.</span>MenuItem<span class=\"token punctuation\">(</span><span class=\"token string\">\"About\"</span><span class=\"token punctuation\">)</span><br>            menuitem_exit <span class=\"token operator\">=</span> gtk<span class=\"token punctuation\">.</span>MenuItem<span class=\"token punctuation\">(</span><span class=\"token string\">\"Exit\"</span><span class=\"token punctuation\">)</span><br>            menu<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>menuitem_about<span class=\"token punctuation\">)</span><br>            menu<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>menuitem_exit<span class=\"token punctuation\">)</span><br>            menuitem_about<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">\"activate\"</span><span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>aboutdialog<span class=\"token punctuation\">)</span><br>            menuitem_exit<span class=\"token punctuation\">.</span>connect<span class=\"token punctuation\">(</span><span class=\"token string\">\"activate\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">lambda</span> w<span class=\"token punctuation\">:</span> gtk<span class=\"token punctuation\">.</span>main_quit<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><br>            menu<span class=\"token punctuation\">.</span>show_all<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>            menu<span class=\"token punctuation\">.</span>popup<span class=\"token punctuation\">(</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>button<span class=\"token punctuation\">,</span> event<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">,</span> self<span class=\"token punctuation\">.</span>tray<span class=\"token punctuation\">)</span><br><br>    <span class=\"token keyword\">def</span> <span class=\"token function\">aboutdialog</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> widget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>        aboutdialog <span class=\"token operator\">=</span> gtk<span class=\"token punctuation\">.</span>AboutDialog<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>        aboutdialog<span class=\"token punctuation\">.</span>set_name<span class=\"token punctuation\">(</span><span class=\"token string\">\"EggTrayIcon\"</span><span class=\"token punctuation\">)</span><br>        aboutdialog<span class=\"token punctuation\">.</span>set_version<span class=\"token punctuation\">(</span><span class=\"token string\">\"1.0\"</span><span class=\"token punctuation\">)</span><br><br>        aboutdialog<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>        aboutdialog<span class=\"token punctuation\">.</span>destroy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br><br>EggTrayIcon<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>gtk<span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2011-03-31T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/how-to-remove-user-names-from-ubuntu-9-10-gdm-login-screen/",
      "url": "https://dangibbs.uk/blog/how-to-remove-user-names-from-ubuntu-9-10-gdm-login-screen/",
      "title": "Remove Usernames from Ubuntu GDM Login Screen",
      "content_html": "<p>If you have lots of users on your Linux system, or are looking for added local\nsecurity, you might want to remove the user list from the GDM login screen.</p>\n<p>GDM has, for a while now, has defaulted to showing usernames at the login\nscreen. Instead of actually typing your username you just click it then enter\nthe password – very similar to some Windows login screens.</p>\n<p>However not everybody wants their usernames shown. To access a computer you\ntypically need a username and password. If someone is physically at your\nmachine they’re already half way to gaining access if they know your username.\nA lot of Linux systems typically have multiple separate users for FTP, HTTP,\nMySQL etc so the login screen can also get very cluttered.</p>\n<h3 id=\"goto-disable-usernames-from-login-screen-via-the-terminal\" tabindex=\"-1\">Disable usernames from login screen via the terminal</h3>\n<p>Reverting to the old login screen is easy. One method is to fire up the\nterminal and use:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> -u gdm gconftool-2 --set --type boolean /apps/gdm/simple-greeter/disable_user_list <span class=\"token boolean\">true</span></code></pre>\n<h3 id=\"goto-enable-usernames-from-login-screen\" tabindex=\"-1\">Enable usernames from login screen</h3>\n<p>It can be enabled again by setting it false:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> -u gdm gconftool-2 --set --type boolean /apps/gdm/simple-greeter/disable_user_list <span class=\"token boolean\">false</span></code></pre>\n<p>Alternatively (for Ubuntu 10.04+) you can go to\n<mark>System &gt; Preferences &gt; Login Screen</mark> and uncheck Show list of users. You\nwill need to unlock it first to make changes.</p>\n<p>That’s it. The next time you login you should have to enter your username\nmanually as well as your password.</p>\n",
      "date_published": "2010-10-25T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/python-wait-function-alternative-to-sleep-for-gtk/",
      "url": "https://dangibbs.uk/blog/python-wait-function-alternative-to-sleep-for-gtk/",
      "title": "Python Wait Function – Alternative to Sleep for GTK",
      "content_html": "<p>I hate sleep functions. In GTK, for example, they lock the UI making it\nunusable and even make some systems think that the program is hanging\n(which in essence it is). Here is a quick “wait” function written in Python.</p>\n<p>As I was waiting for something to install I came up with this idea and quickly\ndecided to write it. Instead of sleeping it runs an unproductive while loop.\nThis has so far stopped programs and UI such as GTK locking up.</p>\n<h3 id=\"goto-gtk-example\" tabindex=\"-1\">GTK Example</h3>\n<pre class=\"language-python\" tabindex=\"0\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">wait</span><span class=\"token punctuation\">(</span>time_lapse<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\ttime_start <span class=\"token operator\">=</span> time<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><br>\ttime_end <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>time_start <span class=\"token operator\">+</span> time_lapse<span class=\"token punctuation\">)</span><br><br>\t<span class=\"token keyword\">while</span> time_end <span class=\"token operator\">></span> time<span class=\"token punctuation\">.</span>time<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\t\t<span class=\"token keyword\">while</span> gtk<span class=\"token punctuation\">.</span>events_pending<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span><br>\t\t\tgtk<span class=\"token punctuation\">.</span>main_iteration<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n",
      "date_published": "2010-09-16T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/insecure-directory-in-envpath-while-running-with-t-switch-at-usrbinpg_ctlcluster/",
      "url": "https://dangibbs.uk/blog/insecure-directory-in-envpath-while-running-with-t-switch-at-usrbinpg_ctlcluster/",
      "title": "Insecure Directory Error in Postgres",
      "content_html": "<p>I received this error with PostgreSQL when using APT on Ubuntu Server 10.04.\nI still don’t know what triggered it (most likely permission related) but\nhere’s an a quick cleanup.</p>\n<p>Exact error output:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\">Preparing to replace postgresql-8.4 <span class=\"token number\">8.4</span>.3-1 <span class=\"token punctuation\">(</span>using <span class=\"token punctuation\">..</span>./postgresql-8.4_8.4.3-1_amd64.deb<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">..</span>.<br> * Stopping PostgreSQL <span class=\"token number\">8.4</span> database server<br> * Insecure directory <span class=\"token keyword\">in</span> <span class=\"token variable\">$ENV</span><span class=\"token punctuation\">{</span><span class=\"token environment constant\">PATH</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> running with -T switch at /usr/bin/pg_ctlcluster line <span class=\"token number\">63</span>.<br>                                                                                                                                                                                                      <span class=\"token punctuation\">[</span>fail<span class=\"token punctuation\">]</span><br>invoke-rc.d: initscript postgresql-8.4, action <span class=\"token string\">\"stop\"</span> failed.<br>dpkg: warning: old pre-removal script returned error <span class=\"token builtin class-name\">exit</span> status <span class=\"token number\">9</span><br>dpkg - trying script from the new package instead <span class=\"token punctuation\">..</span>.<br> * Stopping PostgreSQL <span class=\"token number\">8.4</span> database server<br> * Insecure directory <span class=\"token keyword\">in</span> <span class=\"token variable\">$ENV</span><span class=\"token punctuation\">{</span><span class=\"token environment constant\">PATH</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> running with -T switch at /usr/bin/pg_ctlcluster line <span class=\"token number\">63</span>.<br>                                                                                                                                                                                                      <span class=\"token punctuation\">[</span>fail<span class=\"token punctuation\">]</span><br>invoke-rc.d: initscript postgresql-8.4, action <span class=\"token string\">\"stop\"</span> failed.<br>dpkg: error processing /var/cache/apt/archives/postgresql-8.4_8.4.3-1_amd64.deb <span class=\"token punctuation\">(</span>--unpack<span class=\"token punctuation\">)</span>:<br> subprocess new pre-removal script returned error <span class=\"token builtin class-name\">exit</span> status <span class=\"token number\">9</span><br> * Starting PostgreSQL <span class=\"token number\">8.4</span> database server<br> * Insecure directory <span class=\"token keyword\">in</span> <span class=\"token variable\">$ENV</span><span class=\"token punctuation\">{</span><span class=\"token environment constant\">PATH</span><span class=\"token punctuation\">}</span> <span class=\"token keyword\">while</span> running with -T switch at /usr/bin/pg_ctlcluster line <span class=\"token number\">63</span>.<br>                                                                                                                                                                                                      <span class=\"token punctuation\">[</span>fail<span class=\"token punctuation\">]</span><br>invoke-rc.d: initscript postgresql-8.4, action <span class=\"token string\">\"start\"</span> failed.<br>dpkg: error <span class=\"token keyword\">while</span> cleaning up:<br> subprocess installed post-installation script returned error <span class=\"token builtin class-name\">exit</span> status <span class=\"token number\">9</span><br>Errors were encountered <span class=\"token keyword\">while</span> processing:<br> /var/cache/apt/archives/postgresql-8.4_8.4.3-1_amd64.deb<br>E: Sub-process /usr/bin/dpkg returned an error code <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre>\n<p>To clean this up remove the postmaster and reset the group and general\npermissions.</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> /var/lib/postgresql/8.4/main/postmaster.pid<br><span class=\"token function\">sudo</span> <span class=\"token function\">chown</span> postgres:postgres /etc/postgresql/8.4/main/environment<br><span class=\"token function\">sudo</span> <span class=\"token function\">chmod</span> u+rw,g+rw /etc/postgresql/8.4/main/environment</code></pre>\n",
      "date_published": "2010-09-04T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/text-based-location-address-bar-ubuntu-lucid-lynx/",
      "url": "https://dangibbs.uk/blog/text-based-location-address-bar-ubuntu-lucid-lynx/",
      "title": "Text-based location (address) bar Ubuntu Lucid Lynx",
      "content_html": "<p>One of the first things I noticed when using the latest GNOME GUI on Ubuntu\nLucid Lynx was that there was no button to change the location bar from\nbutton based to text based.</p>\n<p>In older version you had a “pencil” icon in Nautilus that allowed you to switch\nback freely but it’s now been removed. Unfortunately there is no standard\nmethod of reverting to the pencil icon.</p>\n<p>There are two ways you can. To instantly toggle between button-mode and\ntext-mode use <mark>CTRL+L</mark>.</p>\n<p>If, like me, you never use button mode you can set the location to text mode\npermenantly via the gconf editor. The easiest way to do this is to\n<mark>ALT+F2</mark>, type in <code>gconf-editor</code> and hit Run.</p>\n<p>In the configuration editor go to <code>apps &gt; nautilus &gt; preferences</code> then tick\n(check) <strong>always_use_location_entry</strong>. With that checked you’ll permenantly\nhave the text based location bar.</p>\n<p>You can also use <code>/</code> to open up a fresh (empty) location bar.</p>\n",
      "date_published": "2010-05-03T00:00:00Z"
    },{
      "id": "https://dangibbs.uk/blog/kde-default-cursor-after-installing-kubuntu-on-ubuntu/",
      "url": "https://dangibbs.uk/blog/kde-default-cursor-after-installing-kubuntu-on-ubuntu/",
      "title": "KDE Default Cursor After Installing Kubuntu on Ubuntu",
      "content_html": "<p>When you install Kubuntu from inside Ubuntu KDE will automatically overwrite\nthe default (Ubuntu) cursor theme. If you use GDM a lot you’ll probably want to\nrevert back.</p>\n<h2 id=\"goto-kde-and-gdm-cursors-on-ubuntu\" tabindex=\"-1\">KDE and GDM cursors on Ubuntu</h2>\n<p>This will require you to restart GDM which will log you out so finish what\nyou’re doing. Then fire up the terminal\n<mark>Applications &gt; Accessories &gt; Terminal</mark> and enter the following command:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> update-alternatives --config x-cursor-theme</code></pre>\n<p>The default Ubuntu cursor theme is <code>DMZ-White/cursor.theme</code> (typically listed\nas <code>/usr/share/icons/DMZ-White/cursor.theme</code>)</p>\n<p>Enter the selection number to the left and hit Enter.</p>\n<p>Now you’ll need to restart GDM for it to take effect. Via the terminal enter:</p>\n<pre class=\"language-bash\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> /etc/init.d/gdm restart</code></pre>\n<p>You will be logged out and the once GDM starts again you should have the\ndefault cursor theme back.</p>\n",
      "date_published": "2010-01-17T00:00:00Z"
    }
  ]
}
